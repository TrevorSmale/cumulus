---
title: "GO"
date: 2023-05-29T18:31:10-04:00
draft: false
---

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   class="ionicon"
   viewBox="0 0 510.50439 260.23758"
   version="1.1"
   id="svg1232"
   sodipodi:docname="Golang.svg"
   inkscape:version="1.2.2 (732a01da63, 2022-12-09)"
   xml:space="preserve"
   inkscape:export-filename="cup.png"
   inkscape:export-xdpi="96"
   inkscape:export-ydpi="96"
   width="510.50439"
   height="260.23758"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:dc="http://purl.org/dc/elements/1.1/"><path
     id="path305"
     style="fill:#0084ff;fill-opacity:1;stroke-width:1.19055"
     d="m 251.3325,7.9648438 c -5.27709,0.1332011 -10.43821,0.6693953 -15.35937,1.6230468 -12.52983,2.4281054 -27.70266,6.2268014 -34.07227,8.5312504 -7.31774,2.64751 -27.80927,13.357874 -37.28515,19.488281 -3.75906,2.431922 -12.70639,7.692422 -19.88281,11.689453 -22.04334,12.277371 -23.15737,13.074281 -40.92383,29.314453 -10.811529,9.882751 -18.973002,20.934867 -21.3125,28.857422 -0.747399,2.53107 -1.914307,4.17444 -2.769532,3.90039 -3.078377,-0.98646 -21.073613,8.75829 -25.910156,14.03125 -8.103477,8.83457 -9.000913,23.13504 -2.253906,35.92773 3.565318,6.76015 5.725735,8.1723 17.164062,11.22461 14.780008,3.94407 15.726242,4.73483 19.59375,16.37305 1.822546,5.48444 5.51363,14.07973 8.203125,19.10156 2.689539,5.02186 6.677407,13.23721 8.863277,18.25586 2.18587,5.01869 6.76132,12.86041 10.16602,17.42578 3.4996,4.69268 7.44282,10.32929 11.34179,16.0293 h 5.69727 c -0.48547,-0.58222 -0.89557,-1.11865 -1.4082,-1.7207 -11.09463,-13.02988 -26.26779,-37.0532 -29.33789,-46.44922 -1.00438,-3.07386 -3.683791,-8.72005 -5.953126,-12.54688 -3.665537,-6.18134 -6.706367,-14.80569 -8.886719,-25.20703 -2.24344,-10.70233 -2.819574,-33.44444 -1.236328,-48.77539 1.755163,-16.99545 3.071566,-22.67206 6.824219,-29.441404 4.153614,-7.492568 19.549574,-21.248373 33.919924,-30.304687 7.62777,-4.80706 16.38532,-10.626518 19.46093,-12.933594 3.0756,-2.307076 8.66673,-5.934508 12.42578,-8.060547 3.75908,-2.126014 10.19023,-6.09707 14.29102,-8.824219 9.25966,-6.157819 24.12348,-12.773897 38.63281,-17.195312 21.75041,-6.628009 26.22027,-7.37231 44.62696,-7.4375 15.07908,-0.05341 18.55616,0.29531 26.0957,2.619141 14.1689,4.367159 23.42818,9.727456 31.87695,18.453124 4.20247,4.340094 10.02707,9.342271 12.94336,11.115235 17.5711,10.682791 35.16266,28.188976 44.40039,44.183594 4.85821,8.411804 7.29462,13.858719 13.47852,30.138669 5.1101,13.45305 8.97554,21.17825 17.01758,34.00586 13.33359,21.26773 21.54521,40.95927 23.86914,57.2461 2.21605,15.53029 3.33931,22.64754 5.49609,34.78906 1.17453,6.61205 1.94371,11.64891 2.5625,16.3457 h 5.29688 c -0.75992,-17.33443 -2.60686,-30.9819 -6.88672,-52.74219 -0.56852,-2.89075 -0.35116,-3.21215 1.6914,-2.48632 1.28965,0.45829 4.98401,1.12434 8.20899,1.47851 7.81341,0.85804 11.02948,-1.21442 14.38867,-9.27148 3.15949,-7.57814 2.41424,-10.49452 -3.70117,-14.49805 -3.70614,-2.42627 -5.44212,-2.70117 -17.10743,-2.70117 h -12.98437 l -2.80078,-7.68164 c -2.57533,-7.06205 -6.68078,-13.36602 -16.53711,-25.39649 -2.05589,-2.50932 -4.0863,-5.33241 -4.51367,-6.27343 -4.11871,-9.06844 -8.1138,-19.1026 -10.33594,-25.96485 -3.51664,-10.86008 -17.2166,-35.815951 -24.18164,-44.048826 l -5.50391,-6.50586 2.43946,-5.9375 c 6.2018,-15.105323 7.13849,-25.16512 3.02539,-32.470703 -2.16485,-3.84487 -15.34136,-12.44081 -21.49219,-14.021484 -9.67095,-2.4853116 -23.97747,1.018083 -30.49414,7.46875 l -3.16406,3.132812 -10.38868,-4.583984 C 284.04315,10.790042 267.16379,7.5652404 251.3325,7.9648438 Z m 81.03516,6.3320312 c 7.52921,-0.06325 9.16384,0.368698 16.80664,4.443359 4.65618,2.482288 9.594,5.918042 10.97461,7.634766 3.89862,4.847511 4.03747,14.453283 0.35742,24.824219 -1.72891,4.872569 -3.81561,8.699991 -4.84765,8.892578 -0.99637,0.186019 -4.77864,-2.806959 -8.40625,-6.650391 l -6.59571,-6.988281 2.19532,-3.410156 c 2.9921,-4.649249 1.73158,-10.240994 -3.15821,-14.017578 -4.38872,-3.389578 -9.14648,-3.714497 -15.25,-1.042969 -4.15708,1.819536 -4.40219,1.793479 -8.05078,-0.855469 -2.06979,-1.502648 -3.79333,-3.349502 -3.83203,-4.103515 -0.0378,-0.754038 2.52678,-3.010274 5.69922,-5.013672 5.03431,-3.179219 6.82838,-3.651671 14.10742,-3.712891 z m -73.93164,0.976563 c -11.46719,0.0027 -13.09796,0.292078 -21.125,3.763671 -9.50773,4.111988 -21.65207,14.029499 -25.41797,20.75586 -2.52672,4.513049 -5.02734,14.298028 -5.02734,19.673828 0,1.975588 1.38491,7.724337 3.07812,12.775391 2.56399,7.648843 4.25843,10.390592 10.13672,16.410156 7.69934,7.884384 14.49581,12.344566 22.20117,14.568356 6.30085,1.81842 4.94187,1.79154 18.74414,0.37891 8.94887,-0.91589 12.87976,-1.87476 16.22266,-3.957032 2.42671,-1.511521 6.45645,-3.606446 8.95508,-4.654297 5.55621,-2.330027 14.3063,-12.190371 17.57617,-19.804687 4.0603,-9.455194 3.33348,-25.835234 -1.54687,-34.820313 -5.4932,-10.113607 -10.29277,-14.67811 -21.00196,-19.970703 -10.31101,-5.095738 -10.43499,-5.12124 -22.79492,-5.11914 z M 257.46922,19 c 2.34727,0.07803 4.83143,0.38374 7.66211,0.880859 18.07825,3.174832 26.53906,9.166393 33.00391,23.371094 7.24438,15.917509 4.90054,31.787135 -6.39844,43.322266 -6.30805,6.439735 -9.54933,8.251787 -20.51367,11.466797 -11.20392,3.285254 -24.30619,2.365344 -37.05078,-2.601563 -5.99759,-2.337365 -16.58142,-13.851352 -19.17188,-20.857422 -5.7773,-15.625183 -4.71366,-24.436026 4.41211,-36.552734 5.39265,-7.16004 7.44734,-8.871526 15.03907,-12.533203 C 244.62482,20.589276 250.42743,18.765897 257.46922,19 Z m 75.38086,10.527344 c 1.02519,0 2.21044,0.513292 2.63282,1.140625 0.42239,0.627331 -0.0705,1.140625 -1.09571,1.140625 -1.02518,0 -2.21042,-0.513294 -2.63281,-1.140625 -0.42238,-0.627333 0.0705,-1.140625 1.0957,-1.140625 z m -3.26367,2.28125 c 0.68346,0 1.93822,0.769914 2.78906,1.710937 0.8629,0.954383 0.99783,1.710938 0.30469,1.710938 -0.68346,0 -1.9382,-0.76994 -2.78906,-1.710938 -0.8629,-0.954407 -0.99788,-1.710937 -0.30469,-1.710937 z m -46.32031,7.242187 c -1.46933,0.182031 -2.95466,0.796328 -5.33594,1.953125 -8.75493,4.25307 -11.28907,11.764621 -6.43359,19.074219 1.36869,2.06053 3.74388,4.209477 5.27734,4.775391 5.14739,1.899446 12.36815,1.303706 16.62109,-1.371094 4.4542,-2.801382 5.38721,-4.840085 5.41211,-11.84375 0.0222,-6.126763 -3.55094,-10.268028 -10.30273,-11.94336 -2.31652,-0.57481 -3.76895,-0.826562 -5.23828,-0.644531 z m 8.17773,11.798828 c 2.68665,-0.644855 4.51249,1.56912 3.06641,3.716797 -0.44265,0.657374 -1.89022,1.195313 -3.2168,1.195313 -3.30548,0 -3.17933,-4.112886 0.15039,-4.91211 z M 152.80907,65.457031 c -10.07022,0 -12.05045,0.375598 -19.88281,3.767578 -10.67932,4.624885 -19.49029,12.282693 -24.48438,21.279297 -3.36538,6.062543 -3.79139,7.973088 -3.93555,17.679684 -0.13232,8.90916 0.36374,12.1219 2.73047,17.72461 4.77119,11.29493 10.02439,16.07687 26.6211,24.22852 2.56197,1.25833 7.14461,2.33267 10.18554,2.38867 8.89092,0.16379 25.57059,-2.97768 32.62696,-6.14648 7.40081,-3.3235 15.65206,-11.55037 20.90625,-20.8418 3.2333,-5.71772 3.3885,-6.65587 2.63476,-15.96875 -0.88995,-10.996405 -2.30312,-15.452397 -7.29492,-23.013672 -5.27657,-7.9926 -9.57117,-11.612733 -19.62109,-16.539063 -8.87175,-4.348868 -9.81921,-4.558594 -20.48633,-4.558594 z m 0.48242,3.992188 c 10.86169,0 15.42459,1.143045 24.14648,6.048828 15.0406,8.459913 23.45426,34.746643 15.76953,49.269533 -5.70867,10.78845 -16.7682,19.30583 -29.03906,22.36328 -7.45823,1.85832 -20.79676,2.10775 -25.9414,0.48437 -12.04738,-3.80151 -22.01317,-11.49692 -26.60157,-20.54101 -2.44892,-4.82702 -2.90687,-7.57013 -2.91797,-17.45508 -0.008,-7.48365 0.61499,-13.107654 1.72266,-15.541015 0.95478,-2.097362 5.62645,-7.404934 10.38086,-11.794922 10.7758,-9.949797 18.07348,-12.833984 32.48047,-12.833984 z M 177.27,86.5625 c -7.43794,-0.0077 -14.6433,4.960959 -15.86523,10.939453 -1.47453,7.214437 2.861,13.912347 10.09766,15.599607 5.57402,1.29958 9.16116,0.65372 13.90429,-2.5 4.01774,-2.67139 5.12193,-4.19587 5.57813,-7.69922 C 192.24511,93.224794 186.66059,86.5724 177.27,86.5625 Z m 5.93946,11.693359 c 1.67781,-0.2368 3.77344,0.60927 3.77344,1.914061 0,0.62496 -1.12686,1.68879 -2.50391,2.36524 -1.98761,0.97637 -2.66191,0.85264 -3.27149,-0.60547 -0.42235,-1.01023 -0.17162,-2.38426 0.55665,-3.052737 0.37315,-0.342498 0.88604,-0.54216 1.44531,-0.621094 z m 45.41992,7.689451 c -3.28431,-0.1432 -7.185,0.78023 -11.97852,2.75781 -11.94477,4.9279 -17.941,12.64212 -15.44336,19.86524 0.55846,1.615 -0.37439,3.50511 -3.17382,6.43164 -3.33385,3.4852 -3.97769,5.09239 -4.05469,10.11133 -0.10792,7.04488 3.17552,12.17012 9.2832,14.49219 3.79686,1.44355 8.31212,0.93469 15.02344,-1.69532 1.69501,-0.66424 2.26715,0.0176 2.97656,3.54883 1.41842,7.06047 4.12955,13.23748 7.08203,16.13672 3.37748,3.31649 8.33828,2.99192 18.35547,-1.20313 3.72102,-1.55828 8.52435,-3.45651 10.67383,-4.21874 2.1495,-0.76222 5.13555,-2.43477 6.63477,-3.7168 3.58879,-3.06887 2.63284,-8.22345 -3.21485,-17.32227 -2.37298,-3.69228 -4.1539,-7.12632 -3.95703,-7.63086 0.19693,-0.50454 2.3149,-2.11252 4.70703,-3.57422 6.09808,-3.72617 8.89703,-9.15042 7.13867,-13.83398 -3.4065,-9.07339 -8.70661,-12.36412 -20.40039,-12.66797 -6.8864,-0.17893 -8.04571,-0.57043 -11.37109,-3.83789 -2.3287,-2.28814 -4.99694,-3.49937 -8.28125,-3.64258 z m -149.876951,9.30078 c 0.489006,0.0326 0.903187,0.13772 1.228515,0.32227 0.806351,0.45742 1.375,4.30152 1.375,9.29492 0,7.78057 -0.240192,8.60028 -2.794921,9.49414 -4.185181,1.46435 -9.63206,6.93434 -9.63086,9.67188 0.0013,2.30327 4.368151,7.2228 9.015625,10.1582 1.232695,0.77858 2.8207,4.18775 3.652344,7.8418 1.650896,7.25357 0.467448,11.61646 -2.726562,10.04882 -1.025206,-0.50317 -4.54291,-1.7804 -7.816407,-2.83789 -7.791499,-2.51696 -12.802409,-6.50524 -15.826172,-12.59765 -2.97738,-5.99897 -3.056826,-9.56651 -0.449218,-20.24219 1.800301,-7.37044 2.631635,-8.74773 8.138671,-13.46484 5.356931,-4.58852 12.410945,-7.91774 15.833985,-7.68946 z m 167.847651,1.52735 c 8.39442,-0.22156 18.67188,5.57843 18.67188,11.39844 0,1.97759 -1.48806,4.38502 -4.20703,6.80859 -3.41033,3.0399 -5.58443,3.90115 -11.49414,4.55273 -13.49977,1.48842 -20.10536,3.88538 -27.37696,9.92969 -3.73551,3.10509 -8.18995,6.13229 -9.89843,6.72852 -5.13643,1.79246 -7.53195,1.25926 -10.91016,-2.42579 -4.70687,-5.13438 -4.48993,-12.18997 0.53906,-17.44726 3.08521,-3.22528 4.92051,-4.06154 10.25196,-4.66406 11.82058,-1.33589 13.29793,-1.8944 20.11523,-7.61328 3.72006,-3.1207 8.60676,-6.17342 10.86133,-6.78516 1.08693,-0.29492 2.24806,-0.45077 3.44726,-0.48242 z m -1.86718,27.05273 c 6.10639,-0.55749 10.09707,2.90053 14.85546,12.3086 3.55393,7.02667 3.91576,9.4674 1.64454,11.10937 -2.40448,1.73836 -7.50286,2.47375 -10.25782,1.47852 -1.37011,-0.49493 -3.26309,-2.88873 -4.20703,-5.31836 -0.94394,-2.42967 -2.80218,-5.8354 -4.1289,-7.56836 -1.32678,-1.73299 -2.64579,-4.88258 -2.93165,-6.99805 -0.43605,-3.22704 -0.0713,-3.95542 2.26954,-4.53125 0.96705,-0.23789 1.88351,-0.40083 2.75586,-0.48047 z m -11.4043,3.70899 c 1.67427,0.26361 2.91772,2.15532 5.39062,6.68554 1.77359,3.24912 3.92578,6.67616 4.78321,7.61719 0.8574,0.941 1.84602,3.8078 2.19726,6.36914 0.53028,3.86683 0.19054,4.93133 -2.00976,6.27344 -9.58591,5.8472 -15.47668,1.39831 -19.38672,-14.63867 -1.6693,-6.84655 -0.99586,-8.30726 5.1875,-11.24219 1.67441,-0.79476 2.83333,-1.22262 3.83789,-1.06445 z m 209.60351,35.04296 c 6.50736,0.28738 9.99863,1.96052 11.36524,5.25977 1.47542,3.56202 0.79836,4.21397 -2.44727,2.35352 -3.72488,-2.13511 -4.51257,-0.50351 -1.54882,3.20898 1.62928,2.04095 2.30743,4.14264 1.84765,5.7207 -0.93798,3.22017 -6.18032,4.88037 -11.03906,3.49414 -2.05039,-0.585 -5.57235,-1.40335 -7.82617,-1.8164 -3.74056,-0.68558 -4.35292,-1.42067 -7.02539,-8.44922 -1.61025,-4.23488 -2.45169,-7.97028 -1.86914,-8.30078 0.58258,-0.33047 5.53069,-0.91783 10.99609,-1.30469 2.87233,-0.2033 5.37775,-0.26181 7.54687,-0.16602 z m -111.95703,48.87305 c -5.41418,-0.023 -8.71121,0.48786 -9.62109,1.49414 -0.76119,0.84188 -1.1093,1.7833 -0.77539,2.08985 0.78538,0.72093 -1.59282,13.15491 -3.26758,17.08398 -0.70892,1.66321 -2.73408,4.22968 -4.49805,5.70313 -1.76385,1.47337 -2.80288,2.03808 -2.31054,1.2539 0.54218,-0.86367 0.18281,-1.42578 -0.91211,-1.42578 -0.61256,0 -1.56107,0.90244 -2.52735,2.08789 h 8 c 2.03126,-1.16749 4.33424,-1.56033 9.12696,-1.79297 6.02209,-0.29229 8.14553,0.0318 11.28515,1.79297 h 9.14649 c -0.63163,-0.19514 -1.24208,-0.32569 -1.91407,-0.66016 -9.80192,-4.87864 -10.66467,-5.11867 -15.95507,-4.45312 -6.23411,0.78433 -7.25145,-0.35996 -4.95313,-5.56836 0.83983,-1.90309 1.2753,-5.02874 0.96875,-6.94531 -0.97227,-6.08045 2.13199,-7.64963 13.24024,-6.69727 10.89397,0.93398 15.51045,2.77215 17.94336,7.14258 4.01853,7.21873 3.58476,14.60156 -0.45118,7.67969 -2.53677,-4.35083 -5.27343,-3.76102 -2.89062,0.62305 1.03936,1.91141 1.56042,4.67279 1.16015,6.13671 -0.37899,1.38587 -1.29565,2.22899 -2.4414,2.74219 h 5.99414 c 0.0696,-0.057 0.14152,-0.0959 0.21094,-0.1543 3.87687,-3.26108 4.46899,-4.44379 4.40429,-8.76562 -0.17014,-11.31414 -12.10594,-19.29559 -28.96289,-19.36719 z" /><defs
     id="defs1236" /><sodipodi:namedview
     id="namedview1234"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     showgrid="false"
     inkscape:zoom="2.0058594"
     inkscape:cx="301.61635"
     inkscape:cy="257.74488"
     inkscape:window-width="2802"
     inkscape:window-height="1694"
     inkscape:window-x="4435"
     inkscape:window-y="132"
     inkscape:window-maximized="0"
     inkscape:current-layer="svg1232" /><title
     id="title1226">Backspace</title><metadata
     id="metadata7966"><rdf:RDF><cc:Work
         rdf:about=""><dc:title>Backspace</dc:title></cc:Work></rdf:RDF></metadata></svg>



{{< lead >}}

## Overview

Golang, also known as Go, is a statically typed programming language developed by Google. Designed to be efficient, simple, and highly scalable, Go has gained popularity for its clean syntax, robust standard library, and built-in support for concurrent programming. It emphasizes simplicity and readability, making it easy to learn and write code. Go's strong type system helps catch errors at compile-time, ensuring safer and more reliable code. With its excellent performance and low memory footprint, Go is commonly used for developing web applications, network servers, system tools, and other software projects that require efficiency and concurrency.

{{< /lead >}}

## GO API

To get started we will have to create a very simple server which can handle HTTP requests. To do this we’ll create a new file called main.go. Within this main.go file we’ll want to define 3 distinct functions. A homePage function that will handle all requests to our root URL, a handleRequests function that will match the URL path hit with a defined function and a main function which will kick off our API.

    main.go

    package main

    import (
        "fmt"
        "log"
        "net/http"
    )

    func homePage(w http.ResponseWriter, r *http.Request){
        fmt.Fprintf(w, "Welcome to the HomePage!")
        fmt.Println("Endpoint Hit: homePage")
    }

    func handleRequests() {
        http.HandleFunc("/", homePage)
        log.Fatal(http.ListenAndServe(":10000", nil))
    }

    func main() {
        handleRequests()
    }

If we run this on our machine now, we should see our very simple API start up on port 10000 if it’s not already been taken by another process. If we now navigate to http://localhost:10000/ in our local browser we should see Welcome to the HomePage! print out on our screen. This means we have successfully created the base from which we’ll build our REST API.

Our Articles Structure

We’ll be creating a REST API that allows us to CREATE, READ, UPDATE and DELETE the articles on our website. When we talk about CRUD APIs we are referring to an API that can handle all of these tasks: Creating, Reading, Updating and Deleting.

Before we can get started, we’ll have to define our Article structure. Go has this concept of structs that are perfect for just this scenario. Let’s create an Article struct that features a Title, a Description (desc) and Content like so:

    type Article struct {
        Title string `json:"Title"`
        Desc string `json:"desc"`
        Content string `json:"content"`
    }

    // let's declare a global Articles array
    // that we can then populate in our main function
    // to simulate a database
    var Articles []Article

Our Struct contains the 3 properties we need to represent all of the articles on our site. In order for this to work, we’ll also have to import the "encoding/json" package into our list of imports.

Let’s now update our main function so that our Articles variable is populated with some dummy data that we can retrieve and modify later on.

    func main() {
        Articles = []Article{
            Article{Title: "Hello", Desc: "Article Description", Content: "Article Content"},
            Article{Title: "Hello 2", Desc: "Article Description", Content: "Article Content"},
        }
        handleRequests()
    }

Perfect, let’s now move on to creating our /articles endpoint which will return all of the articles that we’ve just defined here.

## Go Packaging Modules

1. Initialize a new go module

    go mod init github.com/trevorsmale/example

2. Create repository, matching name of repo to name of module

3. Create initial go file with module functions

    package mylogger

    import "log"

    func LogInfo(message string) {
        log.Printf("INFO - %v", message)
    }

4. Commit to github

## Routers

Now the standard library is adequate at providing everything you need to get your own simple REST API up and running but now that we’ve got the basic concepts down I feel it’s time to introduce third-party router packages. The most notable and highly used is the gorilla/mux router which, as it stands currently has 2,281 stars on Github.

Building our Router

We can update our existing main.go file and swap in a gorilla/mux based HTTP router in place of the standard library one which was present before.

 Modify your handleRequests function so that it creates a new router.

    main.go

    package main

    import (
        "fmt"
        "log"
        "net/http"
        "encoding/json"
        "github.com/gorilla/mux"
    )

    … // Existing code from above
    func handleRequests() {
        // creates a new instance of a mux router
        myRouter := mux.NewRouter().StrictSlash(true)
        // replace http.HandleFunc with myRouter.HandleFunc
        myRouter.HandleFunc("/", homePage)
        myRouter.HandleFunc("/all", returnAllArticles)
        // finally, instead of passing in nil, we want
        // to pass in our newly created router as the second
        // argument
        log.Fatal(http.ListenAndServe(":10000", myRouter))
    }

    func main() {
        fmt.Println("Rest API v2.0 - Mux Routers")
        Articles = []Article{
            Article{Title: "Hello", Desc: "Article Description", Content: "Article Content"},
            Article{Title: "Hello 2", Desc: "Article Description", Content: "Article Content"},
        }
        handleRequests()
    }

When you now run this, you will see no real change to the way our system works. It will still start up on the same port and return the same results depending on what endpoints you hit.

The only real difference is that we now have a gorilla/mux router which will allow us to easily do things such as retrieve path and query parameters later on in this tutorial.

    $ go run main.go

    Rest API v2.0 - Mux Routers

Path Variables

So far so good, we’ve created a very simple REST API that returns a homepage and all our Articles. But what happens if we want to just view one article?

Well, thanks to the gorilla mux router we can add variables to our paths and then pick and choose what articles we want to return based on these variables. Create a new route within your handleRequests() function just below our /articles route:

    myRouter.HandleFunc("/article/{id}", returnSingleArticle)

Notice that we’ve added {id} to our path. This will represent our id variable that we’ll be able to use when we wish to return only the article that features that exact key. For now, our Article struct doesn’t feature an Id property. Let’s add that now:

    type Article struct {
        Id      string `json:"Id"`
        Title   string `json:"Title"`
        Desc    string `json:"desc"`
        Content string `json:"content"`
    }

We can then update our main function to populate our Id values in our Articles array:

    func main() {
        Articles = []Article{
            Article{Id: "1", Title: "Hello", Desc: "Article Description", Content: "Article Content"},
            Article{Id: "2", Title: "Hello 2", Desc: "Article Description", Content: "Article Content"},
        }
        handleRequests()
    }

Now that we’ve done that, in our returnSingleArticle function we can obtain this {id} value from our URL and we can return the article that matches this criteria. As we haven’t stored our data anywhere we’ll just be returning the Id that was passed to the browser.

    func returnSingleArticle(w http.ResponseWriter, r *http.Request){
        vars := mux.Vars(r)
        key := vars["id"]

        fmt.Fprintf(w, "Key: " + key)
    }

If we navigate to http://localhost:1000/article/1after we’ve now run this, you should see Key: 1 being printed out within the browser.

Let’s use this key value to return the specific article that matches that key.

    func returnSingleArticle(w http.ResponseWriter, r *http.Request) {
        vars := mux.Vars(r)
        key := vars["id"]

        // Loop over all of our Articles
        // if the article.Id equals the key we pass in
        // return the article encoded as JSON
        for _, article := range Articles {
            if article.Id == key {
                json.NewEncoder(w).Encode(article)
            }
        }
    }

## Binaries

Why Go Executables are so damn big

Go binaries are standalone
Everything is statically linked
Memory management
Symbol tables
External packages

The size of the Bin can be reduced by removing debug and symbol table data

Downsides

May cause bugs when:
working with reflections
working with servers and HTTP

Packaging

Go projects can be packaged into single executable binaries.
Go is also capable of building other frameworks into the binary.
REACT front end applications can be packaged with GO and a Database to form a full application.
PocketBase is a great example project that combines Svelt + REACT + GO + SQL LIGHT to form a full service package including payment processing.

Be aware of

CG enabled option

## CRUD Create Read Update Delete

A method to transmit changes to a database

Create – Uses the HTTP POST method to add one or more records.
Read – Uses the HTTP GET method to retrieve one or more records * that match certain criteria.
Update – Uses the HTTP PUT or PATCH methods to update a record.
Delete – Uses the HTTP DELETE method to remove one or more records.

## GORM Object-Relational Mapping

is a fantastic object-relational mapper (ORM) library for Golang that claims to help developers build faster and make fewer errors.

The GORM library is built on top of the Golang database/sql package. That means it only works with relational databases (MySQL, PostgreSQL, SQLite, etc). Like other ORMs, GORM also provides a lot of tools to help developers interact with databases with ease.

    package models

    import (
        "time"

        "github.com/google/uuid"
    )

    type Post struct {
        ID        uuid.UUID `gorm:"type:uuid;default:uuid_generate_v4();primary_key" json:"id,omitempty"`
        Title     string    `gorm:"uniqueIndex;not null" json:"title,omitempty"`
        Content   string    `gorm:"not null" json:"content,omitempty"`
        Image     string    `gorm:"not null" json:"image,omitempty"`
        User      uuid.UUID `gorm:"not null" json:"user,omitempty"`
        CreatedAt time.Time `gorm:"not null" json:"created_at,omitempty"`
        UpdatedAt time.Time `gorm:"not null" json:"updated_at,omitempty"`
    }

    type CreatePostRequest struct {
        Title     string    `json:"title"  binding:"required"`
        Content   string    `json:"content" binding:"required"`
        Image     string    `json:"image" binding:"required"`
        User      string    `json:"user,omitempty"`
        CreatedAt time.Time `json:"created_at,omitempty"`
        UpdatedAt time.Time `json:"updated_at,omitempty"`
    }

    type UpdatePost struct {
        Title     string    `json:"title,omitempty"`
        Content   string    `json:"content,omitempty"`
        Image     string    `json:"image,omitempty"`
        User      string    `json:"user,omitempty"`
        CreateAt  time.Time `json:"created_at,omitempty"`
        UpdatedAt time.Time `json:"updated_at,omitempty"`
    }

## Retrieving

In this part of the tutorial we are going to create a new REST endpoint which, when hit with a HTTP GET request, will return all of the articles for our site.

We’ll first start off by creating a new function called returnAllArticles, which will do the simple task of returning our newly populated Articles variable, encoded in JSON format:

    main.go

    func returnAllArticles(w http.ResponseWriter, r *http.Request){
        fmt.Println("Endpoint Hit: returnAllArticles")
        json.NewEncoder(w).Encode(Articles)
    }

The call to json.NewEncoder(w).Encode(article) does the job of encoding our articles array into a JSON string and then writing as part of our response.

Before this will work, we’ll also need to add a new route to our handleRequests function that will map any calls to http://localhost:10000/articles to our newly defined function.

    func handleRequests() {
        http.HandleFunc("/", homePage)
        // add our articles route and map it to our 
        // returnAllArticles function like so
        http.HandleFunc("/articles", returnAllArticles)
        log.Fatal(http.ListenAndServe(":10000", nil))
    }

Now that we’ve done this, run the code by typing go run main.go and then open up http://localhost:10000/articles in your browser and you should see a JSON representation of your list of articles like so:

    http://localhost:10000/articles response

    [
    {
        Title: "Hello",
        desc: "Article Description",
        content: "Article Content"
    },
    {
        Title: "Hello 2",
        desc: "Article Description",
        content: "Article Content"
    }
    ];

We’ve successfully defined our first API endpoint.

In the next part of this series, you are going to update your REST API to use a gorilla/mux router instead of the traditional net/http router.

Swapping the routers will enable you to more easily perform tasks such as parsing any path or query parameters that may reside within an incoming HTTP request which we will need later on.

## Basic Server

Use Go version 1.11 or higher.

Create the following files and folders according to the structure below. The file server.go sits at the root of your project, as does the static folder, which contains two HTML files: index.html and form.html.

    - server.go
    - static/
    - - index.html
    - - form.html

Open the server.go file and import the required packages. Use fmt to print useful data to the terminal and log to print fatal errors in case the web server crashes.

The net/http is the most important package. It provides all the functionality for creating an HTTP client or server implementation such as a Golang web server.

    package main

    import (
        "fmt"
        "log"
        "net/http"
    )

Lastly, let’s add a simple main() function in the server.go file that prints a message to the terminal.

    func main() {
        fmt.Printf("Starting server at port 8080\n")
    }

To test the setup, start the fictive server with the following command.

    go run server.go

# JSON

Importing, Unmarshalling and Interpreting JSON string data

Let’s assume a simple file config.json, having the following content:

    {
        "origin": "golangdocs.com",
        "user": "Vijay",
        "active": true
    }

Let’s now extract the JSON data from this config.json file.
	
    // main.go
    package main
    
    import (
        "encoding/json"
        "io/ioutil"
        "log"
    )
    
    // The data struct for the decoded data
    // Notice that all fields must be exportable!
    type Data struct {
        Origin string
        User   string
        Active bool
    }
    
    func main() {
        // Let's first read the `config.json` file
        content, err := ioutil.ReadFile("./config.json")
        if err != nil {
            log.Fatal("Error when opening file: ", err)
        }
    
        // Now let's unmarshall the data into `payload`
        var payload Data
        err = json.Unmarshal(content, &payload)
        if err != nil {
            log.Fatal("Error during Unmarshal(): ", err)
        }
    
        // Let's print the unmarshalled data!
        log.Printf("origin: %s\n", payload.Origin)
        log.Printf("user: %s\n", payload.User)
        log.Printf("status: %t\n", payload.Active)
    }

You should get the below output, after creating config.json.

Sample Output

    2021/02/07 16:53:53 origin: golangdocs.com
    2021/02/07 16:53:53 user: Vijay
    2021/02/07 16:53:53 status: true

Seems straightforward, but you must be a bit careful about one thing, if you’re a newcomer to go.


Golang has a concept of “exported” fields in struct datatypes and functions, so this essentially means that these exported fields are the ones which will be visible across different packages. Since the json unmarshal function is external, it can only see exportable fields.


To make a field exportable, just ensure that you capitalize it! That’s why it’s Origin, User and Active, as opposed to origin, user and active.

Reading Unstructured Data from JSON Files

If the contents of our config.json file keep changing regularly, it is practically impossible to keep track of the changes by modifying the struct fields again and again.


To simplify this, we can use the concept of encoding arbitrary data as an interface. We can replicate the JSON structure by visualizing it as a key-value map.


Here, the key will be a string, and the value can be any interface{}.


So we can simply modify the Data struct into a map[string]interface{}!

    // main.go
    package main
    
    import (
        "encoding/json"
        "io/ioutil"
        "log"
    )
    
    func main() {
        // Let's first read the `config.json` file
        content, err := ioutil.ReadFile("./config.json")
        if err != nil {
            log.Fatal("Error when opening file: ", err)
        }
    
        // Now let's unmarshall the data into `payload`
        var payload map[string]interface{}
        err = json.Unmarshal(content, &payload)
        if err != nil {
            log.Fatal("Error during Unmarshal(): ", err)
        }
    
        // Let's print the unmarshalled data!
        log.Printf("origin: %s\n", payload["origin"])
        log.Printf("user: %s\n", payload["user"])
        log.Printf("status: %t\n", payload["active"])
    }

Notice now that we can store arbitrary data easily, due to the interface{} map!

